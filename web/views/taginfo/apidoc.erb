<h1 class="section">API Documentation</h1>

<p>See <a href="http://wiki.openstreetmap.org/wiki/Taginfo/API">the OSM wiki</a> for general information about the API.</p>

<% if params[:show_deprecated] %>
<p><span class="button"><a href="/taginfo/apidoc">Do not show deprecated API calls</a></span></p>
<% else %>
<p><span class="button"><a href="/taginfo/apidoc?show_deprecated=true">Also show deprecated API calls</a></span></p>
<% end %>

<h2>Table of Contents</h2>

<p style="color: red;">This list of API calls and their descriptions are not complete!</p>

<ul>
<% API.paths.keys.sort.each do |version|
       API.paths[version].keys.sort.each do |path|
           doc = API.paths[version][path]
           if !doc.deprecated? || params[:show_deprecated] %>
    <li><a href="#<%= doc.complete_path.tr('/', '_')[1,1000] %>"><%= doc.complete_path %></a><%= doc.deprecated? ? " <span class='bad'>Deprecated. Use <a href='##{ doc.superseded_by.tr('/', '_')[1,1000] }'>#{ doc.superseded_by }</a> instead.</span>" : '' %></li>
<%         end
       end
   end %>
</ul>

<% API.paths.keys.sort.each do |version|
       API.paths[version].keys.sort.each do |path|
           doc = API.paths[version][path]
           if !doc.deprecated? || params[:show_deprecated] %>
<a name="<%= doc.complete_path.tr('/', '_')[1,1000] %>"></a>
<h2><%= doc.complete_path %><%= doc.deprecated? ? " <span class='bad'>Deprecated. Use <a href='##{ doc.superseded_by.tr('/', '_')[1,1000] }'>#{ doc.superseded_by }</a> instead.</span>" : '' %></h2>
<table class="desc">
    </tr>
    <tr>
    <tr>
        <th>Path:</th>
        <td><tt><%= doc.complete_path %></tt></td>
    </tr>
    <tr>
        <th>Description:</th>
        <td><%= doc.description %></td>
    </tr>
    <tr>
        <th>Parameters:</th>
        <td><%= doc.show_parameters %></td>
    </tr>
    <tr>
        <th>Paging:</th>
        <td><%= doc.show_paging %></td>
    </tr>
    <tr>
        <th>Filter:</th>
        <td><%= doc.show_filter %></td>
    </tr>
    <tr>
        <th>Sort:</th>
        <td><%= doc.show_sort %></td>
    </tr>
    <tr>
        <th>Result:</th>
        <td><%= doc.show_result %></td>
    </tr>
    <tr>
        <th>Example:</th>
        <td><a rel="nofollow" href="<%= doc.show_example %>" target="_blank"><%= doc.show_example %></a></td>
    </tr>
    <tr>
        <th title="User interface page where this API is used">UI Example:</th>
        <td><a href="<%= doc.show_ui %>" target="_blank"><%= doc.show_ui %></a></td>
    </tr>
</table>
<%         end
       end
  end %>
